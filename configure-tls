#!/usr/bin/env bash

#set -xeuo pipefail

HOST=g2

CURDIR=$(pwd)

HOSTDIR=${CURDIR}/${HOST}

mkdir ${HOSTDIR}

openssl genrsa -aes256 -out ${HOSTDIR}/${HOST}-ca-key.pem 4096
openssl req -new -x509 -days 365 -key ${HOSTDIR}/${HOST}-ca-key.pem -sha256 -out ${HOSTDIR}/${HOST}-ca.pem

openssl genrsa -out ${HOSTDIR}/${HOST}-server-key.pem 4096

openssl req -subj "/CN=$HOST" -sha256 -new -key ${HOSTDIR}/${HOST}-server-key.pem -out ${HOSTDIR}/${HOST}-server.csr
